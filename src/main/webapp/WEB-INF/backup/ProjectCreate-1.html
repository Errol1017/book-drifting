<div id="ProjectCreatePage" class="cc_main">
    <div class="div_box box10">
        <div class="msg_box">
            <div id="ProjectForm_msg" class="msg_style"></div>
        </div>
        <div class="form_tab_card_tabs" id="ProjectFormTabs">
            <span class="ftc_tab">基础信息</span>
            <span class="ftc_tab">详细介绍</span>
            <span class="ftc_tab">图片资料</span>
            <span class="ftc_tab">项目计划</span>
        </div>
        <div class="form_tab_card_cards" id="ProjectForm">
            <div class="ftc_card" id="ProjectForm0">
                <input type="hidden" id="ProjectForm0_id">
                <div>
                    <label for="ProjectForm0_type" class="ls_mw_100 span20p">项目类型</label>
                    <span class="span_box span70p">
                        <input type="hidden" id="ProjectForm0_type">
                        <input type="text" id="ProjectForm0_type_text" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm0_name" class="ls_mw_100 span20p">项目名称</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm0_name" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm0_total" class="ls_mw_100 span20p">项目总额（元）</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm0_total" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm0_order" class="ls_mw_100 span20p">预约总金额（元）</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm0_order" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm0_rate" class="ls_mw_100 span20p">预期年化收益率</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm0_rate" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm0_period" class="ls_mw_100 span20p">计息周期（天）</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm0_period" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm0_grace" class="ls_mw_100 span20p">宽限期（天）</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm0_grace" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm0_rType" class="ls_mw_100 span20p">还款方式</label>
                    <span class="span_box span70p">
                        <input type="hidden" id="ProjectForm0_rType">
                        <input type="text" id="ProjectForm0_rType_text" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
            </div>
            <div class="ftc_card" id="ProjectForm1">
                <div>
                    <label for="ProjectForm1_desc" class="ls_mw_100 span20p alain_top">项目介绍</label>
                    <span class="span_box span70p">
                        <textarea id="ProjectForm1_desc" class="input_text_area_150 span100p" placeholder="不能为空"></textarea>
                    </span>
                </div>
                <div>
                    <label for="ProjectForm1_intro" class="ls_mw_100 span20p alain_top">核心企业介绍</label>
                    <span class="span_box span70p">
                        <textarea id="ProjectForm1_intro" class="input_text_area_150 span100p" placeholder="不能为空"></textarea>
                    </span>
                </div>
                <div>
                    <label for="ProjectForm1_source" class="ls_mw_100 span20p alain_top">还款来源</label>
                    <span class="span_box span70p">
                        <textarea id="ProjectForm1_source" class="input_text_area_150 span100p" placeholder="不能为空"></textarea>
                    </span>
                </div>
            </div>
            <div class="ftc_card" id="ProjectForm2">
                <div>
                    <label for="ProjectForm2_corp" class="ls_mw_100 span20p alain_top">企业资料</label>
                    <span class="span_box span70p">
                        <input type="hidden" id="ProjectForm2_corp">
                        <img class="img_btn" id="ProjectForm2_corp_upload" src="com-res/common/image/add/add.png">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm2_trad" class="ls_mw_100 span20p alain_top">交易资料</label>
                    <span class="span_box span70p">
                        <input type="hidden" id="ProjectForm2_trad">
                        <img class="img_btn" id="ProjectForm2_trad_upload" src="com-res/common/image/add/add.png">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm2_pro" class="ls_mw_100 span20p alain_top">项目资料</label>
                    <span class="span_box span70p">
                        <input type="hidden" id="ProjectForm2_pro">
                        <img class="img_btn" id="ProjectForm2_pro_upload" src="com-res/common/image/add/add.png">
                    </span>
                </div>
            </div>
            <div class="ftc_card" id="ProjectForm3">
                <div>
                    <label for="ProjectForm3_order" class="ls_mw_100 span20p">开放预约日期</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm3_order" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm3_invest" class="ls_mw_100 span20p">开放投资日期</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm3_invest" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm3_start" class="ls_mw_100 span20p">计息开始日期</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm3_start" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
                <div>
                    <label for="ProjectForm3_end" class="ls_mw_100 span20p">计息结束日期</label>
                    <span class="span_box span70p">
                        <input type="text" id="ProjectForm3_end" class="input_text_35 span100p" placeholder="不能为空">
                    </span>
                </div>
            </div>
            <div class="ftc_handle_box">
                <span class="ls_mw_100 span20p"></span>
                <span class="ftc_handle_box_right span70p">
                    <button class="button_style_80_30" id="ProjectForm_release" style="display: none">发 布</button>
                    <button class="button_style_80_30" id="ProjectForm_submit">新 增</button>
                    <button class="button_style_80_30" id="ProjectForm_unbind">清 空</button>
                </span>
            </div>
        </div>
        <div class="form_tab_card_bottom">
            -&nbsp;新增项目时 需首先提交基础信息<br>
            -&nbsp;所有信息编辑完成后 可发布项目
        </div>
    </div>

    <input type="hidden" id="ProjectCreateBindData">
    <input type="hidden" id="ProjectFormBindData" value="ok">
    <script>
        jQuery(function () {
            jQuery("#ProjectCreateBindData").val("ok");
            jQuery("#ProjectCreateBindData").click(function () {
                jQuery("#ProjectForm_msg").fadeOut();
            });
            jQuery("#ProjectForm0_type_text").dynamic_select_register({
                pageId: "ProjectCreate",
                valId: "ProjectForm0_type",
                textId: "ProjectForm0_type_text",
                msgId: "ProjectForm_msg",
                key: "projectType"
            });
            jQuery("#ProjectForm0_rType_text").dynamic_select_register({
                pageId: "ProjectCreate",
                valId: "ProjectForm0_rType",
                textId: "ProjectForm0_rType_text",
                msgId: "ProjectForm_msg",
                key: "repaymentType"
            });

            jQuery("#ProjectForm0_total").input_number_formatter(4);
            jQuery("#ProjectForm0_order").input_number_formatter(4);
            jQuery("#ProjectForm0_rate").input_decimal_formatter(false);

            jQuery("#ProjectForm2_corp_upload").file_uploader_register({
                pageId: "ProjectCreate",
                uploaderId: "common_uploader",
                valId: "ProjectForm2_corp",
                magId: "ProjectForm_msg",
                fileType: "img",
                fileMaxSize: "2m"
            });
            jQuery("#ProjectForm2_trad_upload").file_uploader_register({
                pageId: "ProjectCreate",
                uploaderId: "common_uploader",
                valId: "ProjectForm2_trad",
                magId: "ProjectForm_msg",
                fileType: "img",
                fileMaxSize: "2m"
            });
            jQuery("#ProjectForm2_pro_upload").file_uploader_register({
                pageId: "ProjectCreate",
                uploaderId: "common_uploader",
                valId: "ProjectForm2_pro",
                magId: "ProjectForm_msg",
                fileType: "img",
                fileMaxSize: "2m"
            });

            jQuery("#ProjectForm3_order").date_picker_register({
                shortDate: true
            });
            jQuery("#ProjectForm3_invest").date_picker_register({
                shortDate: true
            });
            jQuery("#ProjectForm3_start").date_picker_register({
//                shortDate: true
            });
            jQuery("#ProjectForm3_end").date_picker_register({
                shortDate: false
            });

            jQuery("#ProjectCreatePage").form_tab_card_register({
                formId: "ProjectForm",
                tabsId: "ProjectFormTabs",
                isWhole: false,
                inputIds: [["id","type","name","total","order", "rate","period","grace","rType"],["desc","intro","source"],["corp","trad","pro"],["order","invest","start","end"]],
                bind: {
                    id: "ProjectFormBindData",
                    callback: [function (data) {
                        $("#ProjectForm").data("id", data.id)
                    }]
                },
                unbind: {
                    id: "ProjectForm_unbind",
                    callback: [function () {
                        $("#ProjectForm").removeData("id");
                        $("#ProjectForm_submit").text("新 增");
                    }, function () {
                    }, function () {
                        $("#ProjectForm2_corp").trigger("change");
                        $("#ProjectForm2_trad").trigger("change");
                        $("#ProjectForm2_pro").trigger("change");
                    }, function () {
                        $("#ProjectForm3_order").trigger("change");
                        $("#ProjectForm3_invest").trigger("change");
                        $("#ProjectForm3_start").trigger("change");
                        $("#ProjectForm3_end").trigger("change");
                    }]
                },
                validate: {
                    ids: [["type","name","total","order", "rate","period","grace","rType"],["desc","intro","source"],[],["order","invest","start","end"]],
                    func: [function(m){
                        $("#ProjectForm0_type").change(function () {
                            $(this).required().show_check_msg(m);
                        });
                        $("#ProjectForm0_name").change(function () {
                            $(this).required().check_simple_length(0, 100).show_check_msg(m);
                        });
                        $("#ProjectForm0_total").change(function () {
                            $(this).required().require_number(0, 100000000).show_check_msg(m);
                        });
                        $("#ProjectForm0_order").change(function () {
                            $(this).required().require_number(0, 100000000).show_check_msg(m);
                        });
                        $("#ProjectForm0_rate").change(function () {
                            $(this).required().require_number(0, 1).check_simple_length(0, 10).show_check_msg(m);
                        });
                        $("#ProjectForm0_period").change(function () {
                            $(this).required().require_number(0, 10000, true).show_check_msg(m);
                        });
                        $("#ProjectForm0_grace").change(function () {
                            $(this).required().require_number(0, 30, true).show_check_msg(m);
                        });
                        $("#ProjectForm0_rType").change(function () {
                            $(this).required().show_check_msg(m);
                        });
                    }, function (m) {
                        $("#ProjectForm1_desc").change(function () {
                            $(this).required().check_simple_length(0, 50000).show_check_msg(m);
                        });
                        $("#ProjectForm1_intro").change(function () {
                            $(this).required().check_simple_length(0, 50000).show_check_msg(m);
                        });
                        $("#ProjectForm1_source").change(function () {
                            $(this).required().check_simple_length(0, 50000).show_check_msg(m);
                        });
                    }, function (m) {
                    }, function (m) {

                    }],
                    callback: [function (m) {
                    }, function (m) {
                        if ($("#ProjectForm").data("id") == undefined) {
                            $("#"+m).show_msg("项目未创建 请先提交项目基础信息");
                            return false;
                        }
                        return true;
                    }, function (m) {
                        if ($("#ProjectForm").data("id") == undefined) {
                            $("#"+m).show_msg("项目未创建 请先提交项目基础信息");
                            return false;
                        }
                        if (!$("#ProjectForm2_corp").required().show_check_msg(m) || !$("#ProjectForm2_trad").required().show_check_msg(m) || !$("#ProjectForm2_pro").required().show_check_msg(m)) {
                            return false;
                        }
                        return true;
                    }, function (m) {
                        if ($("#ProjectForm").data("id") == undefined) {
                            $("#"+m).show_msg("项目未创建 请先提交项目基础信息");
                            return false;
                        }
                        return true;
                    }]
                },
                gather: {
                    callback: [function (data) {

                    }, function (data) {
                        data.id = $("#ProjectForm").data("id");
                    }, function (data) {
                        data.id = $("#ProjectForm").data("id");
                    }, function (data) {
                        data.id = $("#ProjectForm").data("id");
                    }]
                },
                submit: {
                    id: "ProjectForm_submit",
                    callback: [function (data) {
                        $("#ProjectForm_submit").text("更 新");
                        $("#ProjectForm").data("id", data.id);
                        $("#ProjectForm0_id").val(data.id);
                    }, function (data) {
                        if (data.status == "CREATED") {
                            $("#ProjectForm_release").removeAttr("style");
                            $("#ProjectForm").data("status", "CREATED");
                        }
                    }, function (data) {
                        if (data.status == "CREATED") {
                            $("#ProjectForm_release").removeAttr("style");
                            $("#ProjectForm").data("status", "CREATED");
                        }
                    }, function (data) {
                        if (data.status == "CREATED") {
                            $("#ProjectForm_release").removeAttr("style");
                            $("#ProjectForm").data("status", "CREATED");
                        }
                    }]
                },
            });

            $("#ProjectForm1_desc").blur(function () {
                var dp = $(this).val();
//                if (dp.match(new RegExp("\^(1|2)(0|1)[0-9]{2}-0?([1-9]|10|11|12)-(([0-2]?[1-9])|10|20|30|31) (([0-1]?[0-9])|20|21|22|23|24$"))) {
//                    console.log("ok")
                    console.log(new Date(dp))
                alert(new Date(dp) == "Invalid Date")
//                }else {
//                    console.log("not ok")
//                }
            })


        })
    </script>
</div>